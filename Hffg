local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local root = character:WaitForChild("HumanoidRootPart")

-- SETTINGS
local FLY_SPEED = 100
local UP_SPEED = 60
local DOWN_SPEED = -1

-- Body movers
local gyro = Instance.new("BodyGyro")
gyro.P = 9000
gyro.MaxTorque = Vector3.new(9e9, 9e9, 9e9)
gyro.CFrame = root.CFrame
gyro.Parent = root

local velocity = Instance.new("BodyVelocity")
velocity.MaxForce = Vector3.new(9e9, 9e9, 9e9)
velocity.Parent = root

-- Enable fly
humanoid.PlatformStand = true

RunService.RenderStepped:Connect(function()
	local moveDir = humanoid.MoveDirection

	-- Horizontal movement
	local move = moveDir * FLY_SPEED

	-- Vertical movement
	if humanoid.Jump then
		move = Vector3.new(move.X, UP_SPEED, move.Z)
	else
		move = Vector3.new(move.X, DOWN_SPEED, move.Z)
	end

	velocity.Velocity = move

	-- Face movement direction
	if moveDir.Magnitude > 0 then
		gyro.CFrame = CFrame.new(root.Position, root.Position + moveDir)
	end
end)
